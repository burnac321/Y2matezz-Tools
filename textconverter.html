<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Text File Converter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            color: white;
            margin-bottom: 30px;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .app-container {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .converter-section {
            display: flex;
            flex-direction: column;
            padding: 30px;
        }
        
        @media (min-width: 768px) {
            .converter-section {
                flex-direction: row;
                gap: 30px;
            }
        }
        
        .input-area, .output-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .area-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        h2 {
            font-size: 1.5rem;
            color: #444;
        }
        
        .format-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .format-selector label {
            font-weight: 600;
            color: #555;
        }
        
        select {
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background-color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        select:hover {
            border-color: #6a11cb;
            box-shadow: 0 0 0 2px rgba(106, 17, 203, 0.1);
        }
        
        select:focus {
            outline: none;
            border-color: #6a11cb;
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.2);
        }
        
        .text-area {
            flex: 1;
            min-height: 300px;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            font-family: 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.5;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        .text-area:focus {
            outline: none;
            border-color: #6a11cb;
        }
        
        .file-upload-area {
            background-color: #f8f9ff;
            border: 2px dashed #6a11cb;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-top: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-upload-area:hover {
            background-color: #f0f4ff;
        }
        
        .file-upload-area i {
            font-size: 3rem;
            color: #6a11cb;
            margin-bottom: 15px;
        }
        
        .file-upload-area h3 {
            margin-bottom: 10px;
            color: #444;
        }
        
        .file-upload-area p {
            color: #777;
            margin-bottom: 20px;
        }
        
        .upload-btn {
            display: inline-block;
            background-color: #6a11cb;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .upload-btn:hover {
            background-color: #5a0db3;
        }
        
        #fileInput {
            display: none;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 14px 28px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            min-width: 180px;
        }
        
        .convert-btn {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(106, 17, 203, 0.3);
        }
        
        .convert-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(106, 17, 203, 0.4);
        }
        
        .convert-btn:active {
            transform: translateY(1px);
        }
        
        .download-btn {
            background-color: #28a745;
            color: white;
        }
        
        .download-btn:hover {
            background-color: #218838;
            transform: translateY(-3px);
        }
        
        .download-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .reset-btn {
            background-color: #ffc107;
            color: #333;
        }
        
        .reset-btn:hover {
            background-color: #e0a800;
            transform: translateY(-3px);
        }
        
        .supported-formats {
            background-color: #f8f9ff;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .supported-formats h3 {
            color: #444;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        .format-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .format-item {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .format-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .txt-icon { background-color: #6a11cb; }
        .csv-icon { background-color: #2575fc; }
        .json-icon { background-color: #28a745; }
        .xml-icon { background-color: #ffc107; }
        .html-icon { background-color: #dc3545; }
        .md-icon { background-color: #17a2b8; }
        .log-icon { background-color: #6f42c1; }
        .yaml-icon { background-color: #20c997; }
        .ini-icon { background-color: #fd7e14; }
        .js-icon { background-color: #f0db4f; color: #333; }
        .css-icon { background-color: #264de4; }
        .sql-icon { background-color: #f29111; }
        
        .format-name {
            font-weight: 600;
            color: #444;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: white;
            padding: 20px;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            background-color: #28a745;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(150%);
            transition: transform 0.4s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background-color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-exchange-alt"></i> Universal Text File Converter</h1>
            <p>Convert between various text-based formats instantly. Upload a file or paste text, select your desired format, and download the result.</p>
        </header>
        
        <div class="app-container">
            <div class="converter-section">
                <div class="input-area">
                    <div class="area-header">
                        <h2>Input</h2>
                        <div class="format-selector">
                            <label for="inputFormat">Format:</label>
                            <select id="inputFormat">
                                <option value="txt">Plain Text (TXT)</option>
                                <option value="csv">CSV (Comma Separated Values)</option>
                                <option value="json">JSON (JavaScript Object Notation)</option>
                                <option value="xml">XML (Extensible Markup Language)</option>
                                <option value="html">HTML (HyperText Markup Language)</option>
                                <option value="md">Markdown (MD)</option>
                                <option value="yaml">YAML (YAML Ain't Markup Language)</option>
                                <option value="ini">INI (Configuration File)</option>
                                <option value="log">LOG (Log File)</option>
                                <option value="js">JavaScript (JS)</option>
                                <option value="css">CSS (Cascading Style Sheets)</option>
                                <option value="sql">SQL (Structured Query Language)</option>
                            </select>
                        </div>
                    </div>
                    <textarea id="inputText" class="text-area" placeholder="Paste your text here or upload a file..."></textarea>
                    
                    <div class="file-upload-area" id="uploadArea">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Upload a File</h3>
                        <p>Drag & drop a file here or click to browse</p>
                        <div class="upload-btn">Choose File</div>
                        <input type="file" id="fileInput" accept=".txt,.csv,.json,.xml,.html,.md,.yaml,.yml,.ini,.log,.js,.css,.sql">
                    </div>
                </div>
                
                <div class="output-area">
                    <div class="area-header">
                        <h2>Output</h2>
                        <div class="format-selector">
                            <label for="outputFormat">Format:</label>
                            <select id="outputFormat">
                                <option value="txt">Plain Text (TXT)</option>
                                <option value="csv" selected>CSV (Comma Separated Values)</option>
                                <option value="json">JSON (JavaScript Object Notation)</option>
                                <option value="xml">XML (Extensible Markup Language)</option>
                                <option value="html">HTML (HyperText Markup Language)</option>
                                <option value="md">Markdown (MD)</option>
                                <option value="yaml">YAML (YAML Ain't Markup Language)</option>
                                <option value="ini">INI (Configuration File)</option>
                                <option value="log">LOG (Log File)</option>
                                <option value="js">JavaScript (JS)</option>
                                <option value="css">CSS (Cascading Style Sheets)</option>
                                <option value="sql">SQL (Structured Query Language)</option>
                            </select>
                        </div>
                    </div>
                    <textarea id="outputText" class="text-area" placeholder="Converted text will appear here..." readonly></textarea>
                    <div class="controls">
                        <button id="convertBtn" class="btn convert-btn">
                            <i class="fas fa-sync-alt"></i> Convert
                        </button>
                        <button id="downloadBtn" class="btn download-btn" disabled>
                            <i class="fas fa-download"></i> Download
                        </button>
                        <button id="resetBtn" class="btn reset-btn">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="supported-formats">
                <h3><i class="fas fa-check-circle"></i> Supported Formats</h3>
                <div class="format-grid">
                    <div class="format-item">
                        <div class="format-icon txt-icon">TXT</div>
                        <div class="format-name">Plain Text</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon csv-icon">CSV</div>
                        <div class="format-name">Comma Separated Values</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon json-icon">JSON</div>
                        <div class="format-name">JavaScript Object Notation</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon xml-icon">XML</div>
                        <div class="format-name">Extensible Markup Language</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon html-icon">HTML</div>
                        <div class="format-name">HyperText Markup Language</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon md-icon">MD</div>
                        <div class="format-name">Markdown</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon yaml-icon">YAML</div>
                        <div class="format-name">YAML Ain't Markup Language</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon ini-icon">INI</div>
                        <div class="format-name">Configuration File</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon log-icon">LOG</div>
                        <div class="format-name">Log File</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon js-icon">JS</div>
                        <div class="format-name">JavaScript</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon css-icon">CSS</div>
                        <div class="format-name">Cascading Style Sheets</div>
                    </div>
                    <div class="format-item">
                        <div class="format-icon sql-icon">SQL</div>
                        <div class="format-name">Structured Query Language</div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Universal Text File Converter &copy; 2023 | All conversions are performed locally in your browser</p>
        </footer>
        
        <div id="notification" class="notification">
            Conversion completed successfully!
        </div>
    </div>

    <script>
        // DOM Elements
        const inputText = document.getElementById('inputText');
        const outputText = document.getElementById('outputText');
        const inputFormat = document.getElementById('inputFormat');
        const outputFormat = document.getElementById('outputFormat');
        const convertBtn = document.getElementById('convertBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const resetBtn = document.getElementById('resetBtn');
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const notification = document.getElementById('notification');
        
        // Conversion functions for different formats
        const converters = {
            // Convert to TXT (plain text)
            toTxt: function(content, fromFormat) {
                // For most formats, just return the content as-is
                return content;
            },
            
            // Convert to CSV
            toCsv: function(content, fromFormat) {
                if (fromFormat === 'json') {
                    try {
                        const obj = JSON.parse(content);
                        return jsonToCsv(obj);
                    } catch {
                        return "Error: Invalid JSON format";
                    }
                } else if (fromFormat === 'xml') {
                    // Simple XML to CSV conversion (for basic tables)
                    const rows = content.match(/<row>[\s\S]*?<\/row>/gi);
                    if (rows) {
                        const csvRows = [];
                        rows.forEach(row => {
                            const cells = row.match(/<cell>([\s\S]*?)<\/cell>/gi);
                            if (cells) {
                                const csvRow = cells.map(cell => {
                                    const cellContent = cell.replace(/<cell>|<\/cell>/gi, '').trim();
                                    return `"${cellContent.replace(/"/g, '""')}"`;
                                }).join(',');
                                csvRows.push(csvRow);
                            }
                        });
                        return csvRows.join('\n');
                    }
                }
                
                // For other formats, return as-is or with simple formatting
                return content;
            },
            
            // Convert to JSON
            toJson: function(content, fromFormat) {
                if (fromFormat === 'csv') {
                    return csvToJson(content);
                } else if (fromFormat === 'xml') {
                    return xmlToJson(content);
                } else if (fromFormat === 'yaml') {
                    return yamlToJson(content);
                } else if (fromFormat === 'ini') {
                    return iniToJson(content);
                }
                
                // For other formats, try to parse as JSON or return as a JSON string
                try {
                    const obj = JSON.parse(content);
                    return JSON.stringify(obj, null, 2);
                } catch {
                    return JSON.stringify({ content: content }, null, 2);
                }
            },
            
            // Convert to XML
            toXml: function(content, fromFormat) {
                if (fromFormat === 'json') {
                    try {
                        const obj = JSON.parse(content);
                        return jsonToXml(obj);
                    } catch {
                        return "<error>Invalid JSON format</error>";
                    }
                } else if (fromFormat === 'csv') {
                    return csvToXml(content);
                }
                
                // For other formats, wrap in XML tags
                return `<?xml version="1.0" encoding="UTF-8"?>\n<content>\n${escapeXml(content)}\n</content>`;
            },
            
            // Convert to HTML
            toHtml: function(content, fromFormat) {
                if (fromFormat === 'md') {
                    return markdownToHtml(content);
                } else if (fromFormat === 'txt') {
                    return textToHtml(content);
                }
                
                // For other formats, wrap in HTML structure
                return `<!DOCTYPE html>\n<html>\n<head>\n<title>Converted Document</title>\n</head>\n<body>\n<pre>${escapeHtml(content)}</pre>\n</body>\n</html>`;
            },
            
            // Convert to Markdown
            toMd: function(content, fromFormat) {
                if (fromFormat === 'html') {
                    return htmlToMarkdown(content);
                }
                
                // For other formats, return as code block
                return `\`\`\`\n${content}\n\`\`\``;
            },
            
            // Convert to YAML
            toYaml: function(content, fromFormat) {
                if (fromFormat === 'json') {
                    try {
                        const obj = JSON.parse(content);
                        return jsonToYaml(obj);
                    } catch {
                        return "Error: Invalid JSON format";
                    }
                } else if (fromFormat === 'ini') {
                    return iniToYaml(content);
                }
                
                // For other formats, create simple YAML
                return `content: |\n  ${content.replace(/\n/g, '\n  ')}`;
            },
            
            // Convert to INI
            toIni: function(content, fromFormat) {
                if (fromFormat === 'json') {
                    try {
                        const obj = JSON.parse(content);
                        return jsonToIni(obj);
                    } catch {
                        return "; Error: Invalid JSON format";
                    }
                }
                
                // For other formats, create simple INI
                return `[content]\ntext=${content.replace(/\n/g, '\n')}`;
            },
            
            // Convert to LOG (similar to TXT)
            toLog: function(content, fromFormat) {
                const timestamp = new Date().toISOString();
                return `[${timestamp}] ${content}`;
            },
            
            // Convert to JS
            toJs: function(content, fromFormat) {
                if (fromFormat === 'json') {
                    try {
                        const obj = JSON.parse(content);
                        return `const data = ${JSON.stringify(obj, null, 2)};`;
                    } catch {
                        return `// Error: Invalid JSON format\nconst data = "${content}";`;
                    }
                }
                
                return `// Converted content\nconst content = \`${content}\`;`;
            },
            
            // Convert to CSS
            toCss: function(content, fromFormat) {
                // If content looks like CSS, return as-is
                if (content.includes('{') && content.includes('}')) {
                    return content;
                }
                
                // Otherwise, create a CSS rule
                return `/* Generated CSS */\n.content {\n  white-space: pre-wrap;\n  content: "${content.replace(/\n/g, '\\A ')}";\n}`;
            },
            
            // Convert to SQL
            toSql: function(content, fromFormat) {
                if (fromFormat === 'csv') {
                    return csvToSql(content);
                }
                
                // Create a simple SQL insert statement
                return `-- Generated SQL\nINSERT INTO documents (content) VALUES ('${content.replace(/'/g, "''")}');`;
            }
        };
        
        // Helper functions for conversions
        function jsonToCsv(obj) {
            if (Array.isArray(obj)) {
                if (obj.length === 0) return '';
                
                // Get headers from first object
                const headers = Object.keys(obj[0]);
                const csvRows = [
                    headers.join(','),
                    ...obj.map(row => headers.map(header => {
                        const cell = row[header] !== null ? row[header] : '';
                        return `"${String(cell).replace(/"/g, '""')}"`;
                    }).join(','))
                ];
                return csvRows.join('\n');
            } else {
                // Single object
                const headers = Object.keys(obj);
                const values = headers.map(header => `"${String(obj[header]).replace(/"/g, '""')}"`);
                return headers.join(',') + '\n' + values.join(',');
            }
        }
        
        function csvToJson(csv) {
            const lines = csv.split('\n');
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            
            const result = [];
            for (let i = 1; i < lines.length; i++) {
                if (!lines[i].trim()) continue;
                
                const obj = {};
                const currentline = lines[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                
                for (let j = 0; j < headers.length; j++) {
                    let value = currentline[j] || '';
                    value = value.trim().replace(/^"|"$/g, '');
                    obj[headers[j]] = value;
                }
                result.push(obj);
            }
            
            return JSON.stringify(result.length === 1 ? result[0] : result, null, 2);
        }
        
        function csvToXml(csv) {
            const lines = csv.split('\n');
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            
            let xml = '<?xml version="1.0" encoding="UTF-8"?>\n<data>\n';
            
            for (let i = 1; i < lines.length; i++) {
                if (!lines[i].trim()) continue;
                
                xml += '  <row>\n';
                const currentline = lines[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                
                for (let j = 0; j < headers.length; j++) {
                    let value = currentline[j] || '';
                    value = value.trim().replace(/^"|"$/g, '');
                    xml += `    <${headers[j]}>${escapeXml(value)}</${headers[j]}>\n`;
                }
                xml += '  </row>\n';
            }
            
            xml += '</data>';
            return xml;
        }
        
        function jsonToXml(obj) {
            function parse(obj, nodeName) {
                if (typeof obj !== 'object' || obj === null) {
                    return `<${nodeName}>${escapeXml(String(obj))}</${nodeName}>`;
                }
                
                let xml = '';
                if (Array.isArray(obj)) {
                    xml = obj.map(item => parse(item, 'item')).join('\n');
                } else {
                    xml = Object.keys(obj).map(key => parse(obj[key], key)).join('\n');
                }
                
                return `<${nodeName}>\n${xml}\n</${nodeName}>`;
            }
            
            const rootName = Array.isArray(obj) ? 'array' : 'object';
            return `<?xml version="1.0" encoding="UTF-8"?>\n${parse(obj, rootName)}`;
        }
        
        function xmlToJson(xml) {
            // Simple XML to JSON conversion
            try {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xml, "text/xml");
                
                function parseNode(node) {
                    const obj = {};
                    
                    // Attributes
                    if (node.attributes.length > 0) {
                        obj['@attributes'] = {};
                        for (let attr of node.attributes) {
                            obj['@attributes'][attr.name] = attr.value;
                        }
                    }
                    
                    // Child nodes
                    const children = node.children;
                    if (children.length > 0) {
                        for (let child of children) {
                            const childName = child.nodeName;
                            if (obj[childName]) {
                                if (!Array.isArray(obj[childName])) {
                                    obj[childName] = [obj[childName]];
                                }
                                obj[childName].push(parseNode(child));
                            } else {
                                obj[childName] = parseNode(child);
                            }
                        }
                    } else {
                        // Text content
                        return node.textContent.trim();
                    }
                    
                    return obj;
                }
                
                const root = xmlDoc.documentElement;
                const result = { [root.nodeName]: parseNode(root) };
                return JSON.stringify(result, null, 2);
            } catch {
                return JSON.stringify({ error: "Failed to parse XML" }, null, 2);
            }
        }
        
        function markdownToHtml(md) {
            // Simple markdown to HTML conversion
            let html = md
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
                .replace(/\*(.*)\*/gim, '<em>$1</em>')
                .replace(/`(.*)`/gim, '<code>$1</code>')
                .replace(/!\[(.*?)\]\((.*?)\)/gim, '<img alt="$1" src="$2">')
                .replace(/\[(.*?)\]\((.*?)\)/gim, '<a href="$2">$1</a>')
                .replace(/\n/g, '<br>\n');
            
            return `<!DOCTYPE html>\n<html>\n<head>\n<title>Converted Markdown</title>\n</head>\n<body>\n${html}\n</body>\n</html>`;
        }
        
        function htmlToMarkdown(html) {
            // Simple HTML to markdown conversion
            let md = html
                .replace(/<h1>(.*?)<\/h1>/gim, '# $1\n\n')
                .replace(/<h2>(.*?)<\/h2>/gim, '## $1\n\n')
                .replace(/<h3>(.*?)<\/h3>/gim, '### $1\n\n')
                .replace(/<strong>(.*?)<\/strong>/gim, '**$1**')
                .replace(/<em>(.*?)<\/em>/gim, '*$1*')
                .replace(/<code>(.*?)<\/code>/gim, '`$1`')
                .replace(/<a href="(.*?)">(.*?)<\/a>/gim, '[$2]($1)')
                .replace(/<img alt="(.*?)" src="(.*?)">/gim, '![$1]($2)')
                .replace(/<br\s*\/?>/gim, '\n')
                .replace(/<\/p>|<\/div>|<\/li>/gim, '\n')
                .replace(/<[^>]+>/g, '')
                .replace(/&nbsp;/g, ' ')
                .replace(/&lt;/g, '<')
                .replace(/&gt;/g, '>')
                .replace(/&amp;/g, '&');
            
            return md.trim();
        }
        
        function textToHtml(text) {
            return `<!DOCTYPE html>\n<html>\n<head>\n<title>Converted Text</title>\n<style>\nbody { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }\npre { white-space: pre-wrap; background: #f5f5f5; padding: 15px; border-radius: 5px; }\n</style>\n</head>\n<body>\n<pre>${escapeHtml(text)}</pre>\n</body>\n</html>`;
        }
        
        function jsonToYaml(obj) {
            try {
                const parsed = JSON.parse(obj);
                return jsonObjToYaml(parsed, 0);
            } catch {
                return `content: "${obj.replace(/"/g, '\\"')}"`;
            }
        }
        
        function jsonObjToYaml(obj, indent) {
            const indentStr = '  '.repeat(indent);
            if (typeof obj === 'string') {
                return `${indentStr}"${obj}"`;
            } else if (typeof obj === 'number' || typeof obj === 'boolean') {
                return `${indentStr}${obj}`;
            } else if (Array.isArray(obj)) {
                return obj.map(item => `${indentStr}- ${jsonObjToYaml(item, indent + 1)}`).join('\n');
            } else if (typeof obj === 'object') {
                return Object.keys(obj).map(key => {
                    const value = obj[key];
                    if (typeof value === 'object' && value !== null) {
                        return `${indentStr}${key}:\n${jsonObjToYaml(value, indent + 1)}`;
                    } else {
                        return `${indentStr}${key}: ${jsonObjToYaml(value, indent + 1)}`;
                    }
                }).join('\n');
            }
            return '';
        }
        
        function yamlToJson(yaml) {
            // Simple YAML to JSON conversion
            const lines = yaml.split('\n');
            const result = {};
            
            lines.forEach(line => {
                const match = line.match(/^(\s*)([^:]+):\s*(.*)$/);
                if (match) {
                    const key = match[2].trim();
                    const value = match[3].trim();
                    result[key] = value;
                }
            });
            
            return JSON.stringify(result, null, 2);
        }
        
        function jsonToIni(obj) {
            try {
                const parsed = JSON.parse(obj);
                let ini = '';
                
                if (Array.isArray(parsed)) {
                    parsed.forEach((item, index) => {
                        ini += `[item${index + 1}]\n`;
                        Object.keys(item).forEach(key => {
                            ini += `${key}=${item[key]}\n`;
                        });
                        ini += '\n';
                    });
                } else {
                    Object.keys(parsed).forEach(section => {
                        ini += `[${section}]\n`;
                        if (typeof parsed[section] === 'object') {
                            Object.keys(parsed[section]).forEach(key => {
                                ini += `${key}=${parsed[section][key]}\n`;
                            });
                        } else {
                            ini += `value=${parsed[section]}\n`;
                        }
                        ini += '\n';
                    });
                }
                
                return ini.trim();
            } catch {
                return `[content]\ntext=${obj}`;
            }
        }
        
        function iniToJson(ini) {
            const lines = ini.split('\n');
            const result = {};
            let currentSection = null;
            
            lines.forEach(line => {
                line = line.trim();
                if (line.startsWith('[') && line.endsWith(']')) {
                    currentSection = line.substring(1, line.length - 1);
                    result[currentSection] = {};
                } else if (line.includes('=') && currentSection !== null) {
                    const [key, value] = line.split('=');
                    result[currentSection][key.trim()] = value.trim();
                }
            });
            
            return JSON.stringify(result, null, 2);
        }
        
        function csvToSql(csv) {
            const lines = csv.split('\n');
            if (lines.length < 2) return "-- No data to convert";
            
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const tableName = 'converted_data';
            
            let sql = `-- Generated SQL for CSV import\n`;
            sql += `CREATE TABLE IF NOT EXISTS ${tableName} (\n`;
            sql += headers.map(header => `  ${header} VARCHAR(255)`).join(',\n');
            sql += '\n);\n\n';
            
            for (let i = 1; i < lines.length; i++) {
                if (!lines[i].trim()) continue;
                
                const values = lines[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)
                    .map(v => v.trim().replace(/^"|"$/g, '').replace(/'/g, "''"));
                
                sql += `INSERT INTO ${tableName} (${headers.join(', ')}) VALUES ('${values.join("', '")}');\n`;
            }
            
            return sql;
        }
        
        function escapeXml(unsafe) {
            return unsafe.replace(/[<>&'"]/g, c => {
                switch(c) {
                    case '<': return '&lt;';
                    case '>': return '&gt;';
                    case '&': return '&amp;';
                    case '\'': return '&apos;';
                    case '"': return '&quot;';
                }
            });
        }
        
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
        
        // Main conversion function
        function convert() {
            const input = inputText.value.trim();
            const fromFormat = inputFormat.value;
            const toFormat = outputFormat.value;
            
            if (!input) {
                showNotification('Please enter or upload some text to convert', true);
                return;
            }
            
            if (fromFormat === toFormat) {
                outputText.value = input;
                showNotification('Formats are the same - no conversion needed');
                downloadBtn.disabled = false;
                return;
            }
            
            // Get the appropriate converter
            const converterName = `to${toFormat.charAt(0).toUpperCase() + toFormat.slice(1)}`;
            
            if (converters[converterName]) {
                try {
                    const result = converters[converterName](input, fromFormat);
                    outputText.value = result;
                    downloadBtn.disabled = false;
                    showNotification(`Successfully converted from ${fromFormat.toUpperCase()} to ${toFormat.toUpperCase()}`);
                } catch (error) {
                    outputText.value = `Error during conversion: ${error.message}`;
                    showNotification('Conversion error occurred', true);
                }
            } else {
                outputText.value = `Conversion from ${fromFormat} to ${toFormat} is not supported yet.`;
                showNotification('Conversion not supported for this format', true);
            }
        }
        
        // Download functionality
        function downloadOutput() {
            const output = outputText.value;
            const format = outputFormat.value;
            
            if (!output) {
                showNotification('No output to download', true);
                return;
            }
            
            // Determine MIME type based on format
            const mimeTypes = {
                txt: 'text/plain',
                csv: 'text/csv',
                json: 'application/json',
                xml: 'application/xml',
                html: 'text/html',
                md: 'text/markdown',
                yaml: 'text/yaml',
                ini: 'text/plain',
                log: 'text/plain',
                js: 'application/javascript',
                css: 'text/css',
                sql: 'text/plain'
            };
            
            const mimeType = mimeTypes[format] || 'text/plain';
            const filename = `converted_file.${format}`;
            
            // Create blob and download link
            const blob = new Blob([output], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification(`File downloaded as ${filename}`);
        }
        
        // File upload handling
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Update input format based on file extension
            const extension = file.name.split('.').pop().toLowerCase();
            const formatMap = {
                txt: 'txt', csv: 'csv', json: 'json', xml: 'xml',
                html: 'html', htm: 'html', md: 'md', markdown: 'md',
                yaml: 'yaml', yml: 'yaml', ini: 'ini', log: 'log',
                js: 'js', javascript: 'js', css: 'css', sql: 'sql'
            };
            
            if (formatMap[extension]) {
                inputFormat.value = formatMap[extension];
            }
            
            // Read file content
            const reader = new FileReader();
            reader.onload = function(e) {
                inputText.value = e.target.result;
                showNotification(`File "${file.name}" loaded successfully`);
            };
            reader.readAsText(file);
        }
        
        // Reset function
        function resetAll() {
            inputText.value = '';
            outputText.value = '';
            inputFormat.value = 'txt';
            outputFormat.value = 'csv';
            fileInput.value = '';
            downloadBtn.disabled = true;
            showNotification('Converter has been reset');
        }
        
        // Notification function
        function showNotification(message, isError = false) {
            notification.textContent = message;
            notification.className = `notification ${isError ? 'error' : ''}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Event Listeners
        convertBtn.addEventListener('click', convert);
        downloadBtn.addEventListener('click', downloadOutput);
        resetBtn.addEventListener('click', resetAll);
        fileInput.addEventListener('change', handleFileUpload);
        
        // Upload area click handler
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        // Drag and drop functionality
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.backgroundColor = '#e8eeff';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.backgroundColor = '#f8f9ff';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.backgroundColor = '#f8f9ff';
            
            if (e.dataTransfer.files.length) {
                fileInput.files = e.dataTransfer.files;
                const event = new Event('change', { bubbles: true });
                fileInput.dispatchEvent(event);
            }
        });
        
        // Keyboard shortcut: Ctrl+Enter to convert
        inputText.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                convert();
            }
        });
        
        // Initialize with example text
        window.addEventListener('DOMContentLoaded', () => {
            // Example JSON for demonstration
            const exampleJson = `{
  "employees": [
    {
      "id": 1,
      "name": "John Doe",
      "department": "Engineering"
    },
    {
      "id": 2,
      "name": "Jane Smith",
      "department": "Marketing"
    }
  ]
}`;
            
            inputText.value = exampleJson;
            inputFormat.value = 'json';
            
            // Show welcome message
            setTimeout(() => {
                showNotification('Welcome! Try converting the example JSON to other formats.');
            }, 1000);
        });
    </script>
</body>
</html>
